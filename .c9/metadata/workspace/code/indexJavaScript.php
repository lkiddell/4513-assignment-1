{"changed":true,"filter":false,"title":"indexJavaScript.php","tooltip":"/code/indexJavaScript.php","value":"<!DOCTYPE html>\n<?php\nrequire_once('lib/helpers/visits-setup.inc.php');\n\n$browserGateway = new BrowserTableGateway($dbAdapter);\n$visitsGateway = new VisitsTableGateway($dbAdapter);\n$continentGateway = new ContinentsTableGateway($dbAdapter); \n$deviceBrandGateway = new DeviceBrandTableGateway($dbAdapter);\n$countriesGateway = new CountriesTableGateway($dbAdapter);\n$allContinent = $continentGateway->findAll();\n$allBrowser = $browserGateway->findAll();\n$totalVisits = $visitsGateway->getAllCount();\n$allDevices = $deviceBrandGateway->findAll();\n\n ?>\n\n\t<html>\n\t<!--CSS derives from material design lite CSS framework  https://www.getmdl.io/c-->\n\n\t<head>\n\t\t<link rel=\"stylesheet\" href=\"//storage.googleapis.com/code.getmdl.io/1.0.1/material.blue_grey-light_green.min.css\" />\n\t\t<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n\t\t<link rel=\"stylesheet\" href=\"style.css\" />\n\t\t<script defer src=\"https://code.getmdl.io/1.1.1/material.min.js\"></script>\n\t\t<script language=\"javascript\" src=\"lib/helpers/events.js\"></script>\n\n\n\t\t<title>Admin Dashboard</title>\n\t</head>\n\n\t<body>\n\n\t\t<div class=\"mdl-layout mdl-js-layout mdl-layout--fixed-drawer\n            mdl-layout--fixed-header\">\n\t\t\t<header class=\"mdl-layout__header\">\n\t\t\t\t<div class=\"mdl-layout__header-row\">\n\t\t\t\t\t<div class=\"mdl-layout-spacer\"></div>\n\t\t\t\t\t<div class=\"mdl-textfield mdl-js-textfield mdl-textfield--expandable\n                  mdl-textfield--floating-label mdl-textfield--align-right\">\n\t\t\t\t\t\t<label class=\"mdl-button mdl-js-button mdl-button--icon\" for=\"fixed-header-drawer-exp\">\n\t\t\t\t\t\t\t<i class=\"material-icons\">search</i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class=\"mdl-textfield__expandable-holder\">\n\t\t\t\t\t\t\t<input class=\"mdl-textfield__input\" type=\"text\" name=\"sample\" id=\"fixed-header-drawer-exp\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<div class=\"mdl-layout__drawer\">\n\t\t\t\t<span class=\"mdl-layout-title\">Admin Dashboard</span>\n\t\t\t\t<nav class=\"mdl-navigation\">\n\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"index.php\">Index</a>\n\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"\">Link</a>\n\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"\">Link</a>\n\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"aboutUs.php\">About Us</a>\n\t\t\t\t</nav>\n\t\t\t</div>\n\n\t\t\t<main class=\"mdl-layout__content\">\n\t\t\t\t<div class=\"mdl-grid\">\n\t\t\t\t\t<div class=\"mdl-cell mdl-cell--5-col mdl-grid mdl-grid--no-spacing \">\n\t\t\t\t\t\t<div class=\"mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col\">\n\t\t\t\t\t\t\t<div class=\"mdl-card__title mdl-color--teal-300\">\n\t\t\t\t\t\t\t\t<h2 class=\"mdl-card__title-text\">Browsers and % of Visits</h2>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mdl-card__supporting-text\">\n\n\t\t\t\t\t\t\t\t<?php\n                \t\t\t\techo \"<table class='mdl-data-table mdl-js-data-table'>\";\n                \t\t\t\techo \"<thead>\";\n    \t\t\t\t\t\t\techo \"<tr>\";\n      \t\t\t\t\t\t\techo \"<th class='mdl-data-table__cell--non-numeric'>Browser Name</th>\";\n      \t\t\t\t\t\t\techo \"<th>% of Visits</th></tr>\";\n  \t\t\t\t\t\t\t\techo \"</thead>\";\n\n                \t\t\t\t$count = 1;\n                    \t\t\tforeach ($allBrowser as $row)\n                        \t\t{\n                            \t\t$browCount = $visitsGateway->getCount($count);                 \t\t\n                            \t\t$percentage = ($browCount / $totalVisits) * 100;\n                            \t\t$percentage = substr($percentage, 0, 4).\"%\";\n                            \n                            \t\techo \"<tr>\";\n                            \t\techo \"<td class='mdl-data-table__cell--non-numeric'>\" . $row->name . \"</td>\";\n                            \t\techo \"<td>\" . $percentage . \"</td>\";\n                            \t\techo \"</tr>\";\n                            \t\t$count ++;\n                        \t\t}\n                 \t\t\t\techo \"</table>\";\n                \t\t\t?>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"demo-separator mdl-cell--1-col\"></div>\n\n\t\t\t\t\t\t<div class=\"mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col\">\n\t\t\t\t\t\t\t<div class=\"mdl-card__title mdl-color--light-green-300\">\n\t\t\t\t\t\t\t\t<h2 class=\"mdl-card__title-text\">Visits Per Device Brand</h2>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mdl-card__supporting-text\">\n\n\t\t\t\t\t\t\t\t<form action=\"#\" method=\"get\">\n\t\t\t\t\t\t\t\t\t<div class=\"mdl-select mdl-js-select mdl-select--floating-label\">\n\t\t\t\t\t\t\t\t\t\t<?php \n\t\t\t\t\t\t\t\t\t\t$options =\"\";\n    \t\t\t\t\t\t\t\t\t\t\t$dropdown_result=$deviceBrandGateway->getDeviceNameAndCount();\n\t\t\t\t\t\t\t\t\t\t\t\tforeach($dropdown_result as $row){\n\t\t\t\t\t\t\t\t\t\t\t\t\t$name=$row[\"name\"];\n            \t\t\t\t\t\t\t\t\t\t$deviceViewCount=$row[\"Views\"];\n            \t\t\t\t\t\t\t\t\t    $options.= \"<option value = '\". $deviceViewCount . \"'>\" . $name . \"</option>\";\n\t\n\t\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n    \t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t\t\t<select class=\"mdl-select__input\" id=\"deviceBrand\" name=\"deviceBrand\" onchange=\"dropdown_change(this)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<OPTION VALUE=0>Select a brand</OPTION>\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo $options ?>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\n\n\t\t\t\t\t\t\t\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t\t\t\t\t\t\t\tfunction dropdown_change(e) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar string = document.getElementById(\"deviceBrand\").selectedIndex;\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = document.getElementsByTagName(\"option\")[string].value;\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"visits\").innerHTML = value;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</script>\n\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t<p id=\"visits\"></p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"mdl-cell mdl-cell--7-col mdl-card mdl-shadow--4dp\">\n\t\t\t\t\t\t<div class=\"mdl-card__title mdl-color--brown-300\">\n\t\t\t\t\t\t\t<h2 class=\"mdl-card__title-text\">Card 3</h2></div>\n\t\t\t\t\t\t<div class=\"mdl-card__supporting-text\">\n\n\t\t\t\t\t\t\t<?php $continents = $continentGateway->getAllContinentsAndCodes();  ?>\n\n\t\t\t\t\t\t\t\t<select class=\"mdl-select__input\" id=\"continents\" name=\"continents\" onchange=\"displayCountries()\">\n\t\t\t\t\t\t\t\t\t<?php\n\n                            echo \"<option>Select Continent</option>\"; \n                            foreach($continents as $row) { \n                            \techo $row->ContinentName;\n                            echo \"<option value='\" . $row['ContinentCode'] . \"'> \" . $row['ContinentName'] . \"</option>\"; } ?>\n                            \t</select>\n\t<script type=\"text/javascript\">\n\t\t\tvar planetEarth = JSON.parse('<?php echo json_encode($countriesGateway->getCountryNamesAndCount()) ?>') ;\n\n\tfunction displayCountries() {\n\n\t\tvar table_string = \"<thead> <tr> <th class = 'mdl-data-table__cell--non-numeric' > Country Name </th>  <th> #of Visits </th> </tr> </thead>\";\n\t\tvar string2 = document.getElementById(\"continents\").selectedIndex;\n\t\tconsole.log(\"String: \"+string2);\n\t\tvar value2 = document.getElementById(\"continents\").childNodes[string2+1].value;\n\t\t// getElementsByTagName(\"option\")[string2].value;\n\n\t\tfor(var i = 0; i < planetEarth.length; i++) {\n    var obj = planetEarth[i];\n\t\t\tconsole.log(\"CONTINENT CODE \"+ obj.Continent);\n\t\t\tconsole.log(\"VALUE: \"+value2);\n\t\t\t\t\t\tif (obj.Continent == value2){\n\t\t\t\t\t\ttable_string+=\"<tr> <td class='mdl-data-table__cell--non-numeric'>\" + obj.CountryName + \"</td>\"+\"<td>\"+ obj.Views + \"</td></tr>\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t};\n\n\t\tdocument.getElementById(\"countries_table\").innerHTML = table_string;\n\t\t\t\t\t\t\t\t\t\t\t\t\n};\n\t\t</script>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<table class = 'mdl-data-table mdl-js-data-table' id='countries_table'></table>\n\t\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</div>\n\t\t<script>\n\t\t\twindow.addEventListener(\"load\", loaded());\n\t\t</script>\n\t</body>\n\t<!--Import jQuery before materialize.js-->\n<script src=\"//code.jquery.com/jquery-2.2.1.js\"></script>\n\n\t</html>","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":194,"column":8},"action":"insert","lines":["<!DOCTYPE html>","<?php","require_once('lib/helpers/visits-setup.inc.php');","","$browserGateway = new BrowserTableGateway($dbAdapter);","$visitsGateway = new VisitsTableGateway($dbAdapter);","$continentGateway = new ContinentsTableGateway($dbAdapter); ","$deviceBrandGateway = new DeviceBrandTableGateway($dbAdapter);","$countriesGateway = new CountriesTableGateway($dbAdapter);","$allContinent = $continentGateway->findAll();","$allBrowser = $browserGateway->findAll();","$totalVisits = $visitsGateway->getAllCount();","$allDevices = $deviceBrandGateway->findAll();",""," ?>","","\t<html>","\t<!--CSS derives from material design lite CSS framework  https://www.getmdl.io/c-->","","\t<head>","\t\t<link rel=\"stylesheet\" href=\"//storage.googleapis.com/code.getmdl.io/1.0.1/material.blue_grey-light_green.min.css\" />","\t\t<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />","\t\t<link rel=\"stylesheet\" href=\"style.css\" />","\t\t<script defer src=\"https://code.getmdl.io/1.1.1/material.min.js\"></script>","\t\t<script language=\"javascript\" src=\"lib/helpers/events.js\"></script>","","","\t\t<title>Admin Dashboard</title>","\t</head>","","\t<body>","","\t\t<div class=\"mdl-layout mdl-js-layout mdl-layout--fixed-drawer","            mdl-layout--fixed-header\">","\t\t\t<header class=\"mdl-layout__header\">","\t\t\t\t<div class=\"mdl-layout__header-row\">","\t\t\t\t\t<div class=\"mdl-layout-spacer\"></div>","\t\t\t\t\t<div class=\"mdl-textfield mdl-js-textfield mdl-textfield--expandable","                  mdl-textfield--floating-label mdl-textfield--align-right\">","\t\t\t\t\t\t<label class=\"mdl-button mdl-js-button mdl-button--icon\" for=\"fixed-header-drawer-exp\">","\t\t\t\t\t\t\t<i class=\"material-icons\">search</i>","\t\t\t\t\t\t</label>","\t\t\t\t\t\t<div class=\"mdl-textfield__expandable-holder\">","\t\t\t\t\t\t\t<input class=\"mdl-textfield__input\" type=\"text\" name=\"sample\" id=\"fixed-header-drawer-exp\">","\t\t\t\t\t\t</div>","\t\t\t\t\t</div>","\t\t\t\t</div>","\t\t\t</header>","\t\t\t<div class=\"mdl-layout__drawer\">","\t\t\t\t<span class=\"mdl-layout-title\">Admin Dashboard</span>","\t\t\t\t<nav class=\"mdl-navigation\">","\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"index.php\">Index</a>","\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"\">Link</a>","\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"\">Link</a>","\t\t\t\t\t<a class=\"mdl-navigation__link\" href=\"aboutUs.php\">About Us</a>","\t\t\t\t</nav>","\t\t\t</div>","","\t\t\t<main class=\"mdl-layout__content\">","\t\t\t\t<div class=\"mdl-grid\">","\t\t\t\t\t<div class=\"mdl-cell mdl-cell--5-col mdl-grid mdl-grid--no-spacing \">","\t\t\t\t\t\t<div class=\"mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col\">","\t\t\t\t\t\t\t<div class=\"mdl-card__title mdl-color--teal-300\">","\t\t\t\t\t\t\t\t<h2 class=\"mdl-card__title-text\">Browsers and % of Visits</h2>","\t\t\t\t\t\t\t</div>","\t\t\t\t\t\t\t<div class=\"mdl-card__supporting-text\">","","\t\t\t\t\t\t\t\t<?php","                \t\t\t\techo \"<table class='mdl-data-table mdl-js-data-table'>\";","                \t\t\t\techo \"<thead>\";","    \t\t\t\t\t\t\techo \"<tr>\";","      \t\t\t\t\t\t\techo \"<th class='mdl-data-table__cell--non-numeric'>Browser Name</th>\";","      \t\t\t\t\t\t\techo \"<th>% of Visits</th></tr>\";","  \t\t\t\t\t\t\t\techo \"</thead>\";","","                \t\t\t\t$count = 1;","                    \t\t\tforeach ($allBrowser as $row)","                        \t\t{","                            \t\t$browCount = $visitsGateway->getCount($count);                 \t\t","                            \t\t$percentage = ($browCount / $totalVisits) * 100;","                            \t\t$percentage = substr($percentage, 0, 4).\"%\";","                            ","                            \t\techo \"<tr>\";","                            \t\techo \"<td class='mdl-data-table__cell--non-numeric'>\" . $row->name . \"</td>\";","                            \t\techo \"<td>\" . $percentage . \"</td>\";","                            \t\techo \"</tr>\";","                            \t\t$count ++;","                        \t\t}","                 \t\t\t\techo \"</table>\";","                \t\t\t?>","","\t\t\t\t\t\t\t</div>","\t\t\t\t\t\t</div>","\t\t\t\t\t\t<div class=\"demo-separator mdl-cell--1-col\"></div>","","\t\t\t\t\t\t<div class=\"mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col\">","\t\t\t\t\t\t\t<div class=\"mdl-card__title mdl-color--light-green-300\">","\t\t\t\t\t\t\t\t<h2 class=\"mdl-card__title-text\">Visits Per Device Brand</h2>","\t\t\t\t\t\t\t</div>","\t\t\t\t\t\t\t<div class=\"mdl-card__supporting-text\">","","\t\t\t\t\t\t\t\t<form action=\"#\" method=\"get\">","\t\t\t\t\t\t\t\t\t<div class=\"mdl-select mdl-js-select mdl-select--floating-label\">","\t\t\t\t\t\t\t\t\t\t<?php ","\t\t\t\t\t\t\t\t\t\t$options =\"\";","    \t\t\t\t\t\t\t\t\t\t\t$dropdown_result=$deviceBrandGateway->getDeviceNameAndCount();","\t\t\t\t\t\t\t\t\t\t\t\tforeach($dropdown_result as $row){","\t\t\t\t\t\t\t\t\t\t\t\t\t$name=$row[\"name\"];","            \t\t\t\t\t\t\t\t\t\t$deviceViewCount=$row[\"Views\"];","            \t\t\t\t\t\t\t\t\t    $options.= \"<option value = '\". $deviceViewCount . \"'>\" . $name . \"</option>\";","\t","\t","\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t","    \t\t\t\t\t\t\t\t\t\t?>","\t\t\t\t\t\t\t\t\t\t\t<select class=\"mdl-select__input\" id=\"deviceBrand\" name=\"deviceBrand\" onchange=\"dropdown_change(this)\">","\t\t\t\t\t\t\t\t\t\t\t\t<OPTION VALUE=0>Select a brand</OPTION>","\t\t\t\t\t\t\t\t\t\t\t\t<?php echo $options ?>","\t\t\t\t\t\t\t\t\t\t\t</select>","","","\t\t\t\t\t\t\t\t\t\t\t<script type=\"text/javascript\">","\t\t\t\t\t\t\t\t\t\t\t\tfunction dropdown_change(e) {","","\t\t\t\t\t\t\t\t\t\t\t\t\tvar string = document.getElementById(\"deviceBrand\").selectedIndex;","\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = document.getElementsByTagName(\"option\")[string].value;","\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"visits\").innerHTML = value;","\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t</script>","","\t\t\t\t\t\t\t\t\t\t\t</select>","\t\t\t\t\t\t\t\t\t\t\t<p id=\"visits\"></p>","\t\t\t\t\t\t\t\t\t</div>","\t\t\t\t\t\t\t\t</form>","","\t\t\t\t\t\t\t</div>","\t\t\t\t\t\t</div>","\t\t\t\t\t</div>","","\t\t\t\t\t<div class=\"mdl-cell mdl-cell--7-col mdl-card mdl-shadow--4dp\">","\t\t\t\t\t\t<div class=\"mdl-card__title mdl-color--brown-300\">","\t\t\t\t\t\t\t<h2 class=\"mdl-card__title-text\">Card 3</h2></div>","\t\t\t\t\t\t<div class=\"mdl-card__supporting-text\">","","\t\t\t\t\t\t\t<?php $continents = $continentGateway->getAllContinentsAndCodes();  ?>","","\t\t\t\t\t\t\t\t<select class=\"mdl-select__input\" id=\"continents\" name=\"continents\" onchange=\"displayCountries()\">","\t\t\t\t\t\t\t\t\t<?php","","                            echo \"<option>Select Continent</option>\"; ","                            foreach($continents as $row) { ","                            \techo $row->ContinentName;","                            echo \"<option value='\" . $row['ContinentCode'] . \"'> \" . $row['ContinentName'] . \"</option>\"; } ?>","                            \t</select>","\t<script type=\"text/javascript\">","\t\t\tvar planetEarth = JSON.parse('<?php echo json_encode($countriesGateway->getCountryNamesAndCount()) ?>') ;","","\tfunction displayCountries() {","","\t\tvar table_string = \"<thead> <tr> <th class = 'mdl-data-table__cell--non-numeric' > Country Name </th>  <th> #of Visits </th> </tr> </thead>\";","\t\tvar string2 = document.getElementById(\"continents\").selectedIndex;","\t\tconsole.log(\"String: \"+string2);","\t\tvar value2 = document.getElementById(\"continents\").childNodes[string2+1].value;","\t\t// getElementsByTagName(\"option\")[string2].value;","","\t\tfor(var i = 0; i < planetEarth.length; i++) {","    var obj = planetEarth[i];","\t\t\tconsole.log(\"CONTINENT CODE \"+ obj.Continent);","\t\t\tconsole.log(\"VALUE: \"+value2);","\t\t\t\t\t\tif (obj.Continent == value2){","\t\t\t\t\t\ttable_string+=\"<tr> <td class='mdl-data-table__cell--non-numeric'>\" + obj.CountryName + \"</td>\"+\"<td>\"+ obj.Views + \"</td></tr>\";","\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t};","","\t\tdocument.getElementById(\"countries_table\").innerHTML = table_string;","\t\t\t\t\t\t\t\t\t\t\t\t","};","\t\t</script>","\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t\t\t\t<table class = 'mdl-data-table mdl-js-data-table' id='countries_table'></table>","\t\t\t\t\t\t\t\t\t\t\t","","\t\t\t\t\t\t</div>","\t\t\t\t\t</div>","\t\t\t\t</div>","\t\t\t</main>","\t\t</div>","\t\t<script>","\t\t\twindow.addEventListener(\"load\", loaded());","\t\t</script>","\t</body>","\t<!--Import jQuery before materialize.js-->","<script src=\"//code.jquery.com/jquery-2.2.1.js\"></script>","","\t</html>"],"id":1}]]},"ace":{"folds":[],"scrolltop":229.70099182128843,"scrollleft":0,"selection":{"start":{"row":15,"column":0},"end":{"row":15,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":10,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1456278241190}